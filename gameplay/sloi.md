---
description: На этой странице описаны слои, их свойства и взаимодействия с ними.
layout:
  title:
    visible: true
  description:
    visible: true
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# Слои

Слои — это объекты, на которых размещаются все остальные объекты, такие как сетки, путевые точки, пути, мэшы и т. д. Слои группируются в группы (папки) в иерархическом порядке. По умолчанию, когда вы загружаете мир, он не загружает никакие слои, загружается только тайлы терейна и вегетатция.

Чтобы загрузить все слои мира нажмите ПКМ по иконке мира -> Load all in group&#x20;

<div data-full-width="false">

<figure><img src="../.gitbook/assets/image (37).png" alt="" width="403"><figcaption><p>Загрузка всех слоев мира</p></figcaption></figure>

</div>

## Состояние

Каждый слой и група имеет значок, который указывает текущее состояние слоя/группы:&#x20;

<img src="../.gitbook/assets/image (33).png" alt="" data-size="line"> цветной значок означает, что слой/группа в данный момент загружена.

<img src="../.gitbook/assets/image (34).png" alt="" data-size="line"> цветной значок с буквой H означает, что все слои из этой группы будут скрыты по умолчанию, но могут быть открыты по ходу игры. Определяется значением false, свойства [isLoadOnStart](sloi.md#isloadonstart-less-than-boolean-greater-than).

<img src="../.gitbook/assets/image (31).png" alt="" data-size="line"> серый значок означает, что слой/группа в данный момент выгружена.

<img src="../.gitbook/assets/image (35).png" alt="" data-size="line"> частично серый значок группы означает, что некоторые слои внутри группы загружены, а некоторые нет.

<img src="../.gitbook/assets/image (25).png" alt="" data-size="line">&#x20;

## Добавление объектов

Чтобы добавить объект на слой, сначала нужно загрузить и выделить слой путем двойного нажатия ЛКМ, после чого перейдите в AssetBrowser и выберите мэш или объект, далее нажмите на клавишу **C** для вставки выделеного объекта на слой, или же просто переместите объект из браузера прямо в окно редактора.&#x20;

<figure><img src="../.gitbook/assets/test - The Witcher 3 REDkit - Build  (D3D11on12) 4.0.101539  (Apr 24 2024) 2024-05-07 19-04-49 (1).gif" alt=""><figcaption></figcaption></figure>

## Создание объектов

Чтобы создать объект на слое, сначала нужно загрузить и выделить слой путем двойного нажатия ЛКМ, после чего в окне уровня нажать ПКМ в любом месте, после нажатия вы увидите соответсующее меню, где по категория разделены игровые обьекти котррые вы можете создать.

<figure><img src="../.gitbook/assets/image (66).png" alt=""><figcaption></figcaption></figure>

## Действия со слоем

### Add \[Создание]

Создание нового слоя представляет собой процесс добавления нового слоя к игровому миру. При создании слоя в любом мире слой создается в папке мода проекта в единственном экземпляре.&#x20;

При создание слоя нужно выбрать его [buildingTag](sloi.md#layerbuildingtag) и [type](sloi.md#layertype).

<figure><img src="../.gitbook/assets/image (74).png" alt=""><figcaption></figcaption></figure>

### Checkout \[Выбор]

Checkout создает копию слоя и перемещает его в папку мода (проекта) для дальнейшего редактирования, новосозданный слой становится приоритетней оригинального слоя. Checkout необходим только для редактирования уже существующего мира. Копия слоя создается и сохраняется в папке мода проекта, но оригинальный слой в папке игры остается неизменным. Это позволяет безопасно редактировать и сохранять изменения в слоях уже существующего мира, не влияя на оригинальный контент игры и обеспечивая контроль над процессом редактирования.&#x20;

Checkout слоев в новых мирах не нужен, так как все файлы новых миров находятся в папке мода в единственных экземплярах и делать их копию для редактирования нет нужды.

<figure><img src="../.gitbook/assets/image (71).png" alt=""><figcaption></figcaption></figure>

### Save \[Сохранение]

Сохранение слоя представляет собой процесс сохранения внесенных изменений в редакторе игры.&#x20;

При сохранении слоя существуещего мира изменения не затрагивают оригинальный слой, находящийся в папке игры. Вместо этого изменения сохраняются в копии слоя котороя находится в папке мода после chekout, таким образом  можно управлять ими и безопасно вносить изменения без риска изменения оригинального контента игры.&#x20;

Если слой относится к новому миру, то сохранение приводит к сохранению оригинальной копии слоя которая находится в папке мода в единственном экземпляре.

<figure><img src="../.gitbook/assets/image (73).png" alt=""><figcaption></figcaption></figure>

{% hint style="info" %}
Сохранение мира сохраняет изменения которые были внесены в не сохраненных слоях
{% endhint %}

### Revert \[Откат]

Revert слоя возвращает его к предыдущему состоянию до внесенных изменений.&#x20;

При откате слоя существующего мира изменения возвращаются к оригинальной копии слоя, которая находится в папке игры. Копия слоя, сохраненная в папке мода, удаляется, возвращая слой к своему изначальному состоянию до выполнения checkout.

Если происходит откат нового слоя котрый был создан в существующим мире, он просто удаляется. Это происходит потому, что у слоя нет оригинального файла для восстановления изменений, и он существует только в папке мода.

Если слой относится к новому миру, откат приводит к удалению слоя из папки мода проекта, что по факту означает полное удаление слоя, так как другой копии етого слоя нет.&#x20;

<figure><img src="../.gitbook/assets/image (72).png" alt=""><figcaption></figcaption></figure>

## Класс группы

Класс: **CLayerGroup**

### isLoadOnStart

Тип: **\<boolean>**

Определяет загрузиться ли слои внутри этой определенной группы, при этом слои вложенных групп загрузятся, если им отдельно не выставить значение как false.

{% hint style="info" %}
Свойство isLoadOnStart часто используется для слоев которые связаны с квестами, так как слои квестов загружаются отдельно в файле квеста с помощью ноды [hide/show layers](../quests/editor/nodes/hide-show-layers.md), такой приём используется для подконтрольной загрузке слоев квеста. Детальнее [тут](../quests/editor/usecases.md).
{% endhint %}

## Класс слоя

Класс: **CLayerInfo**

### tags

Тип: **\<string\[]>**&#x20;

Определяет массив уникальных строковых значений, разделенных знаком точки запятой. Используется для создания уникальных строковых идентификаторов слоя с целью их дальнейшего использования как ссылки на слой.

### layerType

Тип: **\<enum>**

Определяет тип слоя в игровом мире и классифицирует слой как статический (AutoStatic) или динамический (NonStatic) в зависимости от своего содержимого и характера объектов. Это позволяет эффективней управлять ресурсами и оптимизировать производительность игры.

<table><thead><tr><th width="202">Тип</th><th>Описание</th></tr></thead><tbody><tr><td>AutoStatic</td><td>Предназначен для статических объектов, которые не изменяют своё положение, не являются интерактивными и не меняют состояние во время игры. К таким объектам относятся статичные меши, декорации и другие элементы, которые не подлежат изменению.</td></tr><tr><td>NonStatic</td><td>Содержит динамические объекты и сущности, которые могут изменять своё положение, состояние или поведение во время игрового процесса. К таким объектам могут относиться движущиеся объекты, персонажи NPC, интерактивные элементы, тигерры, спавнеры, и другие динамические сущности.</td></tr></tbody></table>

{% hint style="warning" %}
Редактор предотвращает размещение некоторых динамических объектов на статических слоях, размещение таких объектов вызовет ошибку и не позволит сохранить слой &#x20;
{% endhint %}

### layerBuildingTag

Тип: **\<enum>**

Играет роль в управлении процессом стриминга слоев в игровом мире, предоставляя возможность назначить тег каждому слою, указывающим на его роль в игровом процессе и важность в контексте стриминга.&#x20;

Например, слои, содержащие объекты для выполнения квестов являются наиболее приоритетными и должны быть помечены тегом **Quest**, чтобы обеспечить их приоритетную загрузку.&#x20;

Тег слоя также определяет значение по умолчанию параметр **аutoHideDistance**, который определяет расстояние, на котором объекты внутри слоя начинают скрываться.

<table><thead><tr><th width="202">Тег</th><th>Описание</th></tr></thead><tbody><tr><td>None </td><td></td></tr><tr><td>Ignored</td><td></td></tr><tr><td>EnvOutdoor </td><td>Содержит объекты и елементы окружающей среды, характерные для открытых пространств. В него могут входить объекты, такие как декорации.</td></tr><tr><td>EnvIndoor </td><td>Содержит объекты и элементы, связанные с внутренними помещениями и интерьерами. Сюда могут входить объекты интерьера, мебель и другие элементы, характерные для внутренних пространств.</td></tr><tr><td>EnvUnderground </td><td>Содержит объекты и элементы, ассоциированные с подземельями, пещерами, подвалами и другими подземными пространствами в игровом мире.</td></tr><tr><td>Quest </td><td>Содержит объекты, связанные с выполнением квестов и заданий в игре. Сюда могут входить NPC,  монстры, предметы и другие элементы, необходимые для развития сюжета и выполнения квестовых целей.</td></tr><tr><td>Communities </td><td>Содержит точки действия (ActionPoints) и другие элементы, связанные с жизнью общины или групп персонажей в игровом мире.</td></tr><tr><td>Audio </td><td>Содержит звуковые эффекты, музыку и другие аудио-ресурсы, используемые в игре. Это включает в себя фоновую музыку, звуки окружающей среды и другие аудио-элементы, способствующие созданию атмосферы  игрового мира.</td></tr><tr><td>Navigation </td><td>Содержит информацию о дорогах, путях и других элементах навигации в игровом мире.</td></tr><tr><td>Gameplay </td><td>Содержит игровые объекты и элементы, влияющие на геймплей и взаимодействие игрока с миром. Сюда могут входить двери, лут, доски объявлений, точилки оружия и брони и другие объекты, которые прямо влияют на процесс игры и игровой опыт.</td></tr><tr><td>DLC </td><td>Содержит слои и объекты, добавленные на уровень из DLC</td></tr></tbody></table>

{% hint style="info" %}
О дебаге тегов слоев в окне просмотра уровня можно ознакомится тут. О подсветке слоев на вкладе сцены в зависимсти от тега можно ознакомится [тут](../editor/tabs.md#nastroiki-otobrazheniya).
{% endhint %}

### layerMergeContentMode

Тип: **\<enum>**

Определяет массив уникальных строковых значений, разделенных знаком точки запятой. Используется для создания уникальных строковых идентификаторов слоя с целью их дальнейшего использования как ссылки на слой.

<table><thead><tr><th width="204">Режим</th><th>Описание</th></tr></thead><tbody><tr><td>Auto</td><td></td></tr><tr><td>ForceAlways</td><td></td></tr><tr><td>ForceNever</td><td></td></tr></tbody></table>
